{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"button\", {\n    onClick: $setup.startRecording\n  }, \"开始录音\"), _createElementVNode(\"button\", {\n    onClick: $setup.stopRecording\n  }, \"停止录音\"), _createElementVNode(\"div\", null, _toDisplayString($setup.recordingText), 1 /* TEXT */)]);\n}","map":{"version":3,"names":["_createElementBlock","_createElementVNode","onClick","$setup","startRecording","stopRecording","_toDisplayString","recordingText"],"sources":["D:\\javafile\\LightControl\\src\\views\\IndexPage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <button @click=\"startRecording\">开始录音</button>\r\n    <button @click=\"stopRecording\">停止录音</button>\r\n    <div>{{ recordingText }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from 'vue';\r\n\r\nlet recognition;\r\nlet recordingText = ref('');\r\n\r\nconst startRecording = () => {\r\n  recognition = new SpeechRecognition();\r\n  recognition.continuous = true;\r\n  recognition.interimResults = true;\r\n  recognition.lang = 'zh-CN';\r\n\r\n  recognition.onresult = (event) => {\r\n    let interimTranscript = '';\r\n    let finalTranscript = '';\r\n\r\n    for (let i = event.resultIndex; i < event.results.length; ++i) {\r\n      if (event.results[i].isFinal) {\r\n        finalTranscript += event.results[i][0].transcript;\r\n      } else {\r\n        interimTranscript += event.results[i][0].transcript;\r\n      }\r\n    }\r\n\r\n    recordingText.value = finalTranscript;\r\n    console.log(finalTranscript);\r\n  };\r\n\r\n  recognition.start();\r\n};\r\n\r\nconst stopRecording = () => {\r\n  if (recognition) {\r\n    recognition.stop();\r\n    recognition = null;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  recognition = new SpeechRecognition();\r\n});\r\n\r\nonUnmounted(() => {\r\n  stopRecording();\r\n});\r\n</script>"],"mappings":";;uBACEA,mBAAA,CAIM,cAHJC,mBAAA,CAA6C;IAApCC,OAAK,EAAEC,MAAA,CAAAC;EAAc,GAAE,MAAI,GACpCH,mBAAA,CAA4C;IAAnCC,OAAK,EAAEC,MAAA,CAAAE;EAAa,GAAE,MAAI,GACnCJ,mBAAA,CAA8B,aAAAK,gBAAA,CAAtBH,MAAA,CAAAI,aAAa,iB"},"metadata":{},"sourceType":"module","externalDependencies":[]}