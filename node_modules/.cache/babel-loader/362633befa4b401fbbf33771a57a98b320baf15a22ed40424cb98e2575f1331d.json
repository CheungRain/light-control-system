{"ast":null,"code":"import { ref, onMounted, onUnmounted } from 'vue';\nexport default {\n  __name: 'IndexPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    let recognition;\n    let recordingText = ref('');\n    const startRecording = () => {\n      recognition = new webkitSpeechRecognition();\n      recognition.continuous = true;\n      recognition.interimResults = true;\n      recognition.lang = 'en-US';\n      recognition.onresult = event => {\n        let interimTranscript = '';\n        let finalTranscript = '';\n        for (let i = event.resultIndex; i < event.results.length; ++i) {\n          if (event.results[i].isFinal) {\n            finalTranscript += event.results[i][0].transcript;\n          } else {\n            interimTranscript += event.results[i][0].transcript;\n          }\n        }\n        recordingText.value = finalTranscript;\n        console.log(finalTranscript);\n      };\n      recognition.start();\n    };\n    const stopRecording = () => {\n      if (recognition) {\n        recognition.stop();\n        recognition = null;\n      }\n    };\n    onMounted(() => {\n      recognition = new webkitSpeechRecognition();\n    });\n    onUnmounted(() => {\n      stopRecording();\n    });\n    const __returned__ = {\n      get recognition() {\n        return recognition;\n      },\n      set recognition(v) {\n        recognition = v;\n      },\n      get recordingText() {\n        return recordingText;\n      },\n      set recordingText(v) {\n        recordingText = v;\n      },\n      startRecording,\n      stopRecording,\n      ref,\n      onMounted,\n      onUnmounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","recognition","recordingText","startRecording","webkitSpeechRecognition","continuous","interimResults","lang","onresult","event","interimTranscript","finalTranscript","i","resultIndex","results","length","isFinal","transcript","value","console","log","start","stopRecording","stop"],"sources":["D:/javafile/LightControl/src/views/IndexPage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <button @click=\"startRecording\">开始录音</button>\r\n    <button @click=\"stopRecording\">停止录音</button>\r\n    <div>{{ recordingText }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from 'vue';\r\n\r\nlet recognition;\r\nlet recordingText = ref('');\r\n\r\nconst startRecording = () => {\r\n  recognition = new webkitSpeechRecognition();\r\n  recognition.continuous = true;\r\n  recognition.interimResults = true;\r\n  recognition.lang = 'en-US';\r\n\r\n  recognition.onresult = (event) => {\r\n    let interimTranscript = '';\r\n    let finalTranscript = '';\r\n\r\n    for (let i = event.resultIndex; i < event.results.length; ++i) {\r\n      if (event.results[i].isFinal) {\r\n        finalTranscript += event.results[i][0].transcript;\r\n      } else {\r\n        interimTranscript += event.results[i][0].transcript;\r\n      }\r\n    }\r\n\r\n    recordingText.value = finalTranscript;\r\n    console.log(finalTranscript);\r\n  };\r\n\r\n  recognition.start();\r\n};\r\n\r\nconst stopRecording = () => {\r\n  if (recognition) {\r\n    recognition.stop();\r\n    recognition = null;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  recognition = new webkitSpeechRecognition();\r\n});\r\n\r\nonUnmounted(() => {\r\n  stopRecording();\r\n});\r\n</script>"],"mappings":"AASA,SAASA,GAAG,EAAEC,SAAS,EAAEC,WAAW,QAAQ,KAAK;;;;;;;IAEjD,IAAIC,WAAW;IACf,IAAIC,aAAa,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAE3B,MAAMK,cAAc,GAAGA,CAAA,KAAM;MAC3BF,WAAW,GAAG,IAAIG,uBAAuB,CAAC,CAAC;MAC3CH,WAAW,CAACI,UAAU,GAAG,IAAI;MAC7BJ,WAAW,CAACK,cAAc,GAAG,IAAI;MACjCL,WAAW,CAACM,IAAI,GAAG,OAAO;MAE1BN,WAAW,CAACO,QAAQ,GAAIC,KAAK,IAAK;QAChC,IAAIC,iBAAiB,GAAG,EAAE;QAC1B,IAAIC,eAAe,GAAG,EAAE;QAExB,KAAK,IAAIC,CAAC,GAAGH,KAAK,CAACI,WAAW,EAAED,CAAC,GAAGH,KAAK,CAACK,OAAO,CAACC,MAAM,EAAE,EAAEH,CAAC,EAAE;UAC7D,IAAIH,KAAK,CAACK,OAAO,CAACF,CAAC,CAAC,CAACI,OAAO,EAAE;YAC5BL,eAAe,IAAIF,KAAK,CAACK,OAAO,CAACF,CAAC,CAAC,CAAC,CAAC,CAAC,CAACK,UAAU;UACnD,CAAC,MAAM;YACLP,iBAAiB,IAAID,KAAK,CAACK,OAAO,CAACF,CAAC,CAAC,CAAC,CAAC,CAAC,CAACK,UAAU;UACrD;QACF;QAEAf,aAAa,CAACgB,KAAK,GAAGP,eAAe;QACrCQ,OAAO,CAACC,GAAG,CAACT,eAAe,CAAC;MAC9B,CAAC;MAEDV,WAAW,CAACoB,KAAK,CAAC,CAAC;IACrB,CAAC;IAED,MAAMC,aAAa,GAAGA,CAAA,KAAM;MAC1B,IAAIrB,WAAW,EAAE;QACfA,WAAW,CAACsB,IAAI,CAAC,CAAC;QAClBtB,WAAW,GAAG,IAAI;MACpB;IACF,CAAC;IAEDF,SAAS,CAAC,MAAM;MACdE,WAAW,GAAG,IAAIG,uBAAuB,CAAC,CAAC;IAC7C,CAAC,CAAC;IAEFJ,WAAW,CAAC,MAAM;MAChBsB,aAAa,CAAC,CAAC;IACjB,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}